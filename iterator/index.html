<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
    // 对象没有定义iterator接口，所以无法使用for of 遍历
    try {
      let obj = {
        ss: 'ss'
      }
      for (let i of obj) {
        console.log(i)
      }
    } catch (e) {
      console.log(e)
    }

    // 那我们就给他加一个：

    let iteratorableObj = {
      ss: 'ss',
      dd: 'dd',
      [Symbol.iterator]: function () {
        let arr = []
        for (let attr in this) {
          if (this.hasOwnProperty(attr)) {
            arr.push({
              label: attr,
              value: this[attr]
            })
          }
        }
        let index = 0
        let length = arr.length
        return {
          next() {
            if (index < length) {
              return {
                value: arr[index++],
                done: false
              }
            } else {
              return {
                done: true
              }
            }
          }
        }
      }
    }

    // 发现对象可以顺利遍历拉！
    for (let i of iteratorableObj) {
      console.log(i)
    }

    // iterator 相当于实现遍历的接口，有了它就可以使用for of对其进行遍历
    // 使用Symbol的原因就是方式属性重复
    // iterator的原理就是在构造函数的原型链上或者某个实例上定义Symbol.iterator方法
    // 该方法返回一个iterator对象，遍历器就会调用iterator对象的next方法，返回第一个值的同时
    // 将指针指向下一个目标，在上述例子中，指针就是数组的index
</script>
</body>
</html>